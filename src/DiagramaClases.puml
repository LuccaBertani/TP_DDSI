@startuml

class Administrador extends Visualizador {
    ' se almacenarán y quedarán a disposición de las personas administradoras.
    -listaContribuyentes: List<Contribuyente>
    'Subida manual del hecho
    +subirHecho(Hecho: hecho)
    +crearColeccion(datosColeccion: DatosColeccion, criterios: List<Filtro>, hechosTotales: List<Hecho>)
    +importarHechos(fuente: Fuente)
    +evaluarSolicitudEliminacion(solicitud: SolicitudHecho, respuesta: Boolean)
    +evaluarSolicitudSubirHecho(solicitud: SolicitudHecho, respuesta: Boolean)
}

class Categoria{
    -titulo: String
}

class Coleccion {
    -titulo: String
    -descripcion: String
    -hechos: List<Hecho>
    -fuente: Fuente
    -criterio: List<Filtro>
}

class ContextoPersona {
    -visualizador: Visualizador
    +ContribuyenteAVisualizador()
    +VisualizadorAContribuyente()
}

class Contribuyente extends Visualizador{
    -cantHechosSubidos: Integer
    +incrementarHechosSubidos()
    +disminuirHechosSubidos()
    +solicitarEliminacion(hecho: Hecho)
}

' Clase para evitar parámetros largos a futuro
class DatosColeccion {
    -titulo: String
    -descripcion: String
    -fuente: Fuente
}

class DatosPersonalesPublicador {
    -nombre: String
    -apellido: String
    -edad: Integer
}

Interface Filtro {
    +aprobarHecho(hecho: Hecho): Boolean
}

class FiltroCategoria implements Filtro{
    -categoria: Categoria
    +aprobarHecho(hecho:Hecho): Boolean
}

class FiltroContenidoMultimedia implements Filtro{
    -tipoContenido: TipoContenido
    +aprobarHecho(hecho: Hecho): Boolean
}

class FiltroDescripcion implements Filtro{
    -descripcion: String
    +aprobarHecho(hecho: Hecho): Boolean
}

class FiltroFechaAcontecimiento implements Filtro{
    -fechaInicial: ZonedDateTime
    -fechaFinal: ZonedDateTime
    +aprobarHecho(hecho: Hecho): Boolean
}

class FiltroFechaCarga implements Filtro{
    -fechaInicial: ZonedDateTime
    -fechaFinal: ZonedDateTime
    +aprobarHecho(Hecho: hecho): Boolean
}

class FiltroOrigen implements Filtro{
    -origenDeseado: Origen
    +aprobarHecho(Hecho: hecho): Boolean
}

class FiltroPais implements Filtro{
    -pais: Pais
    +aprobarHecho(hecho: Hecho): Boolean
}

class FiltroTitulo implements Filtro{
    -titulo: String
    +aprobarHecho(hecho: Hecho): Boolean
}

interface Fuente {
    +leerFuente(): Lista<Hecho>
}

class FuenteDinamica implements Fuente {
    +leerFuente(): List<Hecho>
}

class FuenteEstatica implements Fuente {
    -dataSet: String
    +leerFuente(): List<Hecho>
}

' Para próximas entregas
class FuenteProxy implements Fuente{
    +leerFuente(): List<Hecho>
}

' Implementación de API de openstreetmap para obtener país en base a latitud y longitud
class Geocodificador {
    +obtenerPais(latitud: Double, longitud: Double)
}

' Atributos de clase
class Globales {
    +hechosTotales: List<Hecho>
    +solicitudesEliminacion: List<SolicitudHecho>
    +solicitudesSubirHecho: List<SolicitudHecho>
    +coleccionesTotales: List<Coleccion>
}

class Hecho {
    -titulo: String
    -descripcion: String
    -categoria: Categoria
    -contenidoMultimediaOpcional: TipoContenido
    -pais: Pais
    -fechaAcontecimiento: ZonedDateTime
    -fechaDeCarga: ZonedDateTime
    -origen: Origen
}

enum Origen {
    CARGA_MANUAL
    DATASET
    CONTRIBUYENTE
}

class Pais {
    -pais: String
}

class SolicitudHecho {
    -GestorPersona: ContextoPersona
    -hecho: Hecho
}

enum TipoContenido {
    TEXTO
    IMAGEN
    AUDIO
    VIDEO
}

class Visualizador{
    -datosPersonales: DatosPersonalesPublicador
    +solicitudSubirHecho(hecho: Hecho, GestorPersona: ContextoPersona)
    +navegarPorHechos(filtros: List<Filtro>, coleccion: Coleccion)
    +navegarPorHechos(coleccion: Coleccion)
    -aplicarFiltros(filtros: List<Filtro>, coleccion: Coleccion): Set<Hecho>
}


Coleccion *-- Hecho
' Un contribuyente sí o sí debe tener hechos asociados, sino no es un contribuyente
Contribuyente *-- Hecho

Pais --* Hecho

Hecho *-- TipoContenido

Hecho *-- Categoria

Hecho *-- Origen

ContextoPersona --* Visualizador

SolicitudHecho --* Hecho

SolicitudHecho --* Visualizador

@enduml